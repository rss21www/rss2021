---
layout: paper
title: "MRFMap: Online Probabilistic 3D Mapping using Forward Ray Sensor Models"
invisible: true
---
*[Kumar Shaurya Shankar](https://sites.google.com/site/kumarshaurya/home), [Nathan Michael](https://nmichael.me/)*
{: style="color:black; font-size: 120%; text-align: center;"}

<table width="40%"> <tr>
<td style="width: 20%; text-align: center;"><a href="1232"><img src="{{ site.baseurl }}/images/paper_link.png"
width = "50"  height = "60"/> </a> </td>

<td style="width: 20%; text-align: center;"><a href="https://mrfmap.github.io/"><img src="{{ site.baseurl }}/images/website_link.png"
width = "50"  height = "60"/> </a> </td>

<td style="width: 20%; text-align: center;"><a href="https://github.com/mrfmap/mrfmap"><img src="{{ site.baseurl }}/images/software_link.png"
width = "50"  height = "60"/> </a> </td>

<td style="width: 20%; text-align: center;"><a href="nan"><img src="{{ site.baseurl }}/images/pheedloop_link.png"
width = "70"  height = "60"/> </a> </td>

</tr></table>

### Abstract
<html><p style="color:gray; font-size: 120%; text-align: justified;">
Traditional dense volumetric representations for robotic mapping make simplifying assumptions about sensor noise characteristics due to computational constraints.  We present a framework that, unlike conventional occupancy grid maps, explicitly models the sensor ray formation for a depth sensor via a Markov Random Field and performs loopy belief propagation to infer the marginal probability of occupancy at each voxel in a map. By explicitly reasoning about occlusions our approach models the correlations between adjacent voxels in the map. Further, by incorporating learnt sensor noise characteristics we perform accurate inference even with noisy sensor data without ad-hoc definitions of sensor uncertainty. We propose a new metric for evaluating probabilistic volumetric maps and demonstrate the higher fidelity of our approach on simulated as well as real-world datasets.
</p></html>

### Paper Reviews
<details><summary style="font-size:20px;"><b> Review 2</b></summary>
<p style="color:gray; font-size: 120%; text-align: justified;">
## Summary:This paper focuses on occupancy grid mapping. The main contribution is an explicit probabilistic model for the formation of sensor rays used to update a Markov Random Field representation of the environment via the belief propagation algorithm. Unlike most occupancy mapping algorithms, this work takes the correlation between map cells into account and makes the inference scalable via belief propagation. The proposed approach is demonstrated in simulated and real-world experiments using the ICL-NUIM dataset and a Realsense D435 camera.# Recommendation:This is a strong paper with new ideas that are likely to apply to other problems in robot mapping. The strengths of the paper include (1) a precise probabilistic model of forward ray sensing, suitable for RGBD and Lidar sensors, and its use in a Belief Propagation formulation of the occupancy grid mapping problem and (2) comprehensive simulated and real-world experiments and comparisons to Octomap. There are several weaknesses that should be addressed as discussed below. Overall, the paper makes a novel contribution to occupancy mapping, by formulating it as a Markov Random Field and applying Belief Propagation, that will be of interest to the robotics community.# Major Comments: 1. The paper lacks a clear problem statement that specifies the variables of interest and the mapping task rigorously. It is strongly recommended that such a statement is included in a separate section before Sec. III.  2. The paper would benefit from a clear summary of the belief propagation algorithm, specified to the occupancy mapping problem. More precisely, the authors are encouraged to add an algorithm summary at the end of Sec. IV in order to make it possible for the results to be reproduced easily.   3. The scalability of the proposed method is a major concern as there might be millions of voxels and rays in a 3D mapping application. There is no discussion or evaluation of the scalability and memory requirements of the proposed approach as compared, e.g., to Octomap, which scales quite nicely to large environments.# Minor Comments: -- Octomap and related methods are not described in the related work. In general, the related work may be strengthened by including more related work, especially approaches based on Gaussian Process occupancy mapping, e.g.,S. O'Callaghan, F. Ramos, "Gaussian process occupancy maps," IJRR 2012.S. Kim, J. Kim, "Occupancy Mapping and Surface Reconstruction Using Local Gaussian Processes With Kinect Sensors," IEEE Transactions on Cybernetics, 2013.J. Wang, B. Englot, "Fast, accurate gaussian process occupancy maps via test-data octrees and nested Bayesian fusion," ICRA 2016.T. Whelan, R. Salas-Moreno, B. Glocker, A. Davison, and S. Leutenegger, "ElasticFusion: Real-Time Dense SLAM and Light Source Estimation," IJRR 2016.S. Guo, N. Atanasov, "Information Filter Occupancy Mapping using Decomposable Radial Kernels," IROS 2019.T. Schops, T. Sattler, M. Pollefeys, "BAD SLAM: Bundle Adjusted Direct RGB-D SLAM," CVPR 2019. -- The review of the sum-product algorithm is not sufficiently self-contained. In general, the notation in the paper can be improved. For example, for a reader unfamiliar with BP, the unary factor in (7) might be unclear. What is the difference between $o_{N_r}$ and $o^r_{N_r}$ in Eq. (10)?  -- There may be a typo in Eq. (15); there should be a negative sign behind the integration.  -- The approach presented in Sec. III.D seems to use a much simpler model that the exact expression for the range measurement likelihood derived in eq. (18). In detail, the authors resort to a Riemann sum approximation of (18) which does not use $\omega(s)$. This means that essentially a simple model has been used, which could have been defined and explianed from the very beginning, instead of introducing a complex accurate model and abandoning it for the sake of computational complexity.  -- It might be good to discuss, on the basis of the evaluation, to what extend is the independent ray assumption valid. 
</p> </details>

<table width="100%"><tr><td style="width: 30%; text-align: center;"><a href="{{ site.baseurl }}/program/papers/59"> <img src="{{ site.baseurl }}/images/previous_icon.png" width = "120"  height = "90"/> </a> </td>

<td style="width: 30%; text-align: center;"><a href="{{ site.baseurl }}/program/papers"> <img src="{{ site.baseurl }}/images/overview_icon.png" width = "120"  height = "90"/> </a> </td> 

<td style="width: 30%; text-align: center;"><a href="{{ site.baseurl }}/program/papers/61"> <img src="{{ site.baseurl }}/images/next_icon.png" width = "100"  height = "80"/> </a> </td> 

</tr></table>

